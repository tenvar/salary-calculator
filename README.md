# Техническое Задание: Калькулятор Зарплаты (Израиль 2025/2026)

## 1. Обзор Проекта
Разработка веб-приложения для расчета чистой заработной платы (Netto) в Израиле. Калькулятор должен учитывать актуальные налоговые ставки, льготные баллы (Nekudot Zikuy) и социальные отчисления.
**Ключевое требование:** Все данные о баллах и налоговых рамках ДОЛЖНЫ храниться в отдельном JSON-файле (например, `rates.json`) для удобства обновления.

## 2. Технологический Стек
*   **Платформа:** Web (SPA или Static).
*   **Языки:** HTML5, CSS3, JavaScript (ES6+).
*   **Фреймворк:** Vanilla JS или легковесный (например, Vite + Preact/React) — *на усмотрение разработчика*.
*   **Стили:** Современный CSS (Flexbox/Grid), поддержка RTL (справа-налево) для иврита.
*   **Хранение данных:** Внешний JSON-файл (обязательно).

## 3. Функциональные Требования

### 3.1 Вводные данные (Inputs)
Пользователь должен заполнить следующую форму:
1.  **Финансовые данные:**
    *   Базовая зарплата (Brutto, ежемесячно).
    *   Бонусы / Комиссионные.
    *   Дополнительные выплаты (без соц. отчислений).
    *   **Оздоровительные (Dmei Havra'a).**
    *   Оплата проезда (Nesi'ot).
    *   Стоимость автомобиля (Shovi Rechev) — *влияет на налогооблагаемую базу*.
    *   Стоимость питания / Телефон (Shovi Aruchot).
    *   Другие льготы (Shovi Hatava Aheret).
2.  **Личные данные:**
    *   Пол (Мужской / Женский).
    *   Статус резидента (Резидент, Новый репатриант/Oleh Hadash).
    *   Дата репатриации (если применимо).
    *   Семейное положение (Холост/Женат/Разведен).
    *   Льгота населенного пункта (Zikuy Yishuv): Выбор поселения или ввод %.
    *   Семейное положение / Дети:
        *   Кол-во детей 0-5 лет.
        *   Кол-во детей 6-17 лет.
        *   Кол-во детей 18 лет.
    *   Служба в армии (Не служил, <24 мес, >24 мес).
    *   Образование (Нет, Бакалавр, Магистр).

### 3.2 Логика Расчета

#### А. Налогооблагаемая база
> `TaxableIncome = Salary + Bonuses + Travel + Havraa + NonSocialAdditions + CarValue + FoodValue + OtherBenefits`
*(Примечание: `NonSocialAdditions` и `Travel` часто являются частью брутто, но не учитываются для пенсии. Уточнить логику.)*

#### Б. Подоходный Налог (Mas Hachnasa)
Рассчитывается ступенчато от `TaxableIncome`.

**Таблица Ступеней (2025/26):**
| Ступень | Ставка | Диапазон (NIS) | Налог в ступени (Max) |
| :--- | :--- | :--- | :--- |
| 1 | 10% | 0 — 7,010 | 701 ₪ |
| 2 | 14% | 7,011 — 10,060 | 427 ₪ |
| 3 | 20% | 10,061 — 16,150 | 1,218 ₪ |
| 4 | 31% | 16,151 — 22,440 | 1,950 ₪ |
| 5 | 35% | 22,441 — 46,690 | 8,487 ₪ |
| 6 | 47% | 46,691+ | Остаток * 0.47 |
*   *Опционально:* Налог на сверхдоходы (Mas Yasef) 3% с суммы > 58,000 ₪.

#### В. Льготные Единицы (Nekudot Zikuy)
Льготные единицы уменьшают **сумму налога** (не базу).
**Стоимость 1 единицы:** 242 ₪ (загружать из JSON).

**Правила начисления:**
1.  **База (Резидент):** 2.25 балла.
2.  **Пол:** Женский +0.5.
3.  **Дети (у Мазери):**
    *   0-5 лет: +2.5 / реб.
    *   6-17 лет: +1.0 / реб.
    *   18 лет: +0.5 / реб.
4.  **Дети (у Отца):**
    *   До 3 лет (0-3): +2.5 / реб. *(Настраивается в JSON)*.
5.  **Новый Репатриант (Oleh Hadash):**
    *   1-18 мес с даты алии: +0.25 (1/12 от 3).
    *   19-30 мес: +0.16 (1/12 от 2).
    *   31-42 мес: +0.08 (1/12 от 1).
6.  **Армия (в течение 36 мес после службы):**
    *   Мужчины (>24 мес): +2.0.
    *   Женщины (или <24 мес): +1.0.
7.  **Образование:**
    *   Бакалавр (Tore Rishon): +1.0.
    *   Магистр (Tore Sheni): +0.5.

> `TaxDiscount = Points * 242`
> `TaxDiscount = Points * 242`
> `SettlementDiscount = Math.min(TaxableIncome, SettlementCeiling) * SettlementRate`
> `FinalIncomeTax = Max(0, GrossTax - TaxDiscount - SettlementDiscount)`

#### Г. Битуах Леуми и Налог на Здоровье
Рассчитывается от `TaxableIncome` (или денежной базы, если указано).
**Порог:** 7,522 ₪ (60% от средней ЗП).

| Ступень | Ставка БЛ | Ставка Здоровье | Итого |
| :--- | :--- | :--- | :--- |
| **До 7,522** | 0.40% | 3.10% | **3.50%** |
| **Свыше 7,522** | 3.95% | 5.00% | **8.95%** |

#### Д. Социальные фонды (Вычеты)
*   **Пенсия:** % настраивается (обычно 6%). База: `Salary + Bonuses`.
*   **Керен Иштальмут:** % настраивается (обычно 2.5%). База: `Salary + Bonuses`.
*   **Страхование трудоспособности (Ovdan Kosher Avoda):** Учитывать участие работодателя (обычно не влияет на нетто, но важно для стоимости работодателя).
    *   *Потолок (для сведения):* ~15,712 ₪.

#### Е. Итоговый Расчет (Netto)
> `TotalDeductions = FinalIncomeTax + SocialSecurity + Pension + StudyFund`
> `NetSalary = (Salary + Bonuses) - TotalDeductions`

## 4. Интерфейс (UI/UX)
*   **Языки:** Переключатель [RU] [EN] [HE].
    *   При выборе HE (Иврит) включать `dir="rtl"`.
*   **Стиль:** Rich Aesthetics. Яркие цвета, современные шрифты (Inter/Roboto), "Glassmorphism" или чистый Flat стиль. Плавные анимации при пересчете.
*   **Адаптивность:** Полная поддержка мобильных устройств.

## 5. Псевдокод (Reference)
```javascript
function calculateSalary(input) {
    // 1. Считаем Базу для налогов
    let taxableIncome = input.baseSalary + input.bonuses + input.carValue + input.foodValue;

    // 2. Считаем Налог на доходы (Gross Tax)
    let grossTax = applyTaxBrackets(taxableIncome, TAX_BRACKETS_TABLE);

    // 3. Считаем Льготные баллы (Credit Points)
    let points = 2.25; // База
    if (input.isFemale) points += 0.5;
    points += calculateChildPoints(input.childrenAges);
    points += calculateAliyahPoints(input.aliyahDate);
    points += calculateArmyPoints(input.army);
    points += calculateDegreePoints(input.degree);
    
    let taxDiscount = points * 242; // CONSTANT

    // 4. Финальный подоходный налог
    let finalIncomeTax = Math.max(0, grossTax - taxDiscount);

    // 5. Считаем Битуах Леуми
    let socialSecurity = applyBituahLeumiBrackets(taxableIncome, 7522);

    // 6. Считаем пенсионные отчисления (от базовой ЗП, без авто)
    let pensionDed = input.baseSalary * 0.06; 
    let studyFundDed = input.baseSalary * 0.025;

    // 7. Считаем Нетто
    let totalDeductions = finalIncomeTax + socialSecurity + pensionDed + studyFundDed;
    let netSalary = (input.baseSalary + input.bonuses) - totalDeductions;

    return netSalary;
}
```
